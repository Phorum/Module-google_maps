Module  : Google Maps Module 
Version : 1.0.6
Author  : Maurice Makaay <maurice@phorum.org>

This module implements Google Maps functionality in the user profile.
The user can indicate in the control center where he/she lives and this
location can be displayed to others on the profile viewing screen.

The module can also be used to plot all known user locations on a map.
You will have to create a link to this user map yourself. See "Customization"
below for information on how to link to the user map.

For running this mod, you need Phorum 5.1.16 or later. It will not
work for earlier versions of Phorum. 


Contents:
1. Install
2. Upgrade
3. Customization
 3.1 Module templates
 3.2 User control center
 3.3 User profile screen
 3.4 Styling of the maps
 3.5 Width and heights of the maps
 3.6 Linking to the user map


1. Install
----------

- Register for a Google Maps API key (it's free) at
  http://www.google.com/apis/maps/
  You will need this key later on in the installation;

- Unpack the archive;

- Move the directory "google_maps" to the directory "mods"
  within your Phorum installation;

- Login as administrator in Phorum's administrative interface and
  go to the "Modules" section;

- Enable the module "Google Maps".

- Configure the module through the module's settings page. Enter at
  least the API key that you have registered in the first step of
  the installation.


2. Upgrade
----------

The recommended way for upgrading from versions prior to 1.0.2 is:

- Login as administrator in Phorum's administrative interface and
  go to the "Modules" section;

- Disable the module "Google Maps".

- Delete the directory "mods/google_maps" within your Phorum installation
  (but keep of course customized template files if you have those).

- Move the new "google_maps" directory to the "mods" directory.

- Go to the Modules administration and enable the module "Google Maps".


3. Customization
----------------

 3.1 Module templates
 --------------------

  This module makes use of module templates. If you want to modify the
  templates to make them work better for your site's template, then do
  not edit the template files that were in the module distribution.
  Instead, copy the full directory "mods/google_maps/templates/default" to 
  "mods/google_maps/templates/yourtemplatename" (asuming that your site's
  template is stored as "templates/yourtemplatename") and edit the files
  in the new directory. Phorum will automatically recognize that you have
  created a specific template set to use for your site's active template.

 3.2 User control center
 -----------------------

  By default, the module will add the Google map editor to the user
  profile screen on the "Edit My Profile" page. In case you want to 
  fully customize where and how the map is shown inside the control center,
  you can disable automatic displaying of the map tool through the module
  settings. After that, you can edit your "cc_usersettings.tpl" template
  file and use the special template variable {MOD_GOOGLE_MAPS} for 
  displaying the map where you want it to appear.

  Here's an example of what could be added to the cc_usersettings.tpl:

  {IF PROFILE->USERPROFILE}
    <tr>
      <td colspan="2">
        {LANG->mod_google_maps->CCIntroduction}<br/>
        {MOD_GOOGLE_MAPS}
      </td>
    </tr>
  {/IF}

 3.3 User profile screen
 -----------------------

  By default, the module will add the Google map for the user to the bottom
  of the profile page. In case you want to fully customize the way in which
  the map is displayed on the profile page, you can disable automatic 
  displaying of the map through the module settings. After that, you can edit
  your "profile.tpl" template file and use the special template variable
  {MOD_GOOGLE_MAPS} to display the map where you want it to appear. For users
  that did not configure their location through the control center, the
  {MOD_GOOGLE_MAPS} variable will not be set. 
  
  Here's an example of what could be added to the profile.tpl:

  {IF MOD_GOOGLE_MAPS}
    <tr>
      <td nowrap="nowrap" valign="top" style="padding-top: 10px">
        My location:
      </td>
      <td width="100%" valign="top" style="padding-top: 10px">
        In the map below, you can see where I am.<br/>
        <br/>
        {MOD_GOOGLE_MAPS}
      </td>
    </tr>
  {/IF}

 3.4 Styling of the maps
 -----------------------

  Styling of the maps can be done through CSS.
  The following div id's are defined in the code:

  #maptool           A surrounding div around each map
  #maptool_topbar    Only for edit mode; containing Search location and Help
  #maptool_map       A surrounding div around the google map iframe
  #maptool_bottombar Only for edit mode; containing location and Unset position

 3.5 Width and heights of the maps
 ---------------------------------

  For each template, you can tweak the map widths and heights in the 
  user control center and profile screen. This can be done by setting
  the template variables cc_width, cc_height, profile_width and profile_height
  in settings.tpl (mods/google_maps/templates/yourtemplate/settings.tpl).

  In the settings.tpl files that are shipped with this module, pure PHP
  code is used for defining them. That is done to make the module work
  for both Phorum 5.1 and 5.2 (the development tree at time of writing).
  For defining your own, I would recommend using the following syntax instead:

  For Phorum 5.1:

  {VAR cc_width 100%}
  {VAR cc_height 350px}
  {VAR control_width 100%}
  {VAR control_height 350px}

  For Phorum 5.2:

  {VAR cc_width "100%"}
  {VAR cc_height "350px"}
  {VAR control_width "100%"}
  {VAR control_height "350px"}

  Beware: do not use percentual heights! Those will not work.

 3.6 Linking to the user map
 ---------------------------

  For linking to the user map, the template variable 
  {URL->MOD_GOOGLE_MAPS_USERMAP} can be used. So a basic link could
  be put in your templates like this:

  <a href="{URL->MOD_GOOGLE_MAPS_USERMAP}">View user locations</a>

  For modifying the user map page itself, you can change the module
  template usermap.tpl (mods/google_maps/templates/yourtemplate/usermap.tpl).

